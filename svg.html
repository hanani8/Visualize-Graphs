<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,400italic,600,600italic,700,700italic,900,900italic%7CSource+Code+Pro:500,600" rel="stylesheet" type="text/css">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-Z8ST4J1329"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-Z8ST4J1329');
</script>
    <style>
        body {
            font-family: "Source Sans Pro", sans-serif;
        }
        svg {
    overflow: visible !important;
}
        .wf {
            outline: 1px solid black;
        }
        
        .ns {
            background-color: silver;
        }
        
        .ns2 {
            background-color: gray;
        }
        .edges {
            stroke: black;
            fill: blue
        }
        .dir {
            stroke: black;
            fill: blue;
            stroke-width: 5%;
            stroke-linecap: round;
        }
        .undir {
            stroke: black;
            fill: blue;
            stroke-width: 5%;
            stroke-linecap: round;
        }
        .draggable {
            cursor: move;
        }
    </style>
    <title>Trackers</title>
</head>

<body>
    <div class="container">
        <div class="row">
            <div class="col-4 wf">
                <h5 class="text-center display-6">Input</h5>
                <form>
                    <input type="radio" id="option1" name="directed" value="1">
                    <label for="option1">Directed</label>
                    <input type="radio" id="option2" name="directed" value="2">
                    <label for="option2">Un-Directed</label>
                </form>
                        Format: <input type="text" id="input_type" value="1"> 
                    <textarea type="text" style="width:100%; max-width:100%; white-space: pre-wrap;" id="input"></textarea>
                    <div class="text-center">
                        <input class="btn btn-success btn-sm mt-2 mb-2" type="submit" id="submit" value="Generate!">
                    </div>
                <hr>
                <div width="100%">
                <p>Allowed Formats:</p>
                <svg xlmns="http://www.w3.org/2000/svg" viewBox="0 0 100 30" preserveAspectRatio="xMidYMid meet" overflow="visible">
                    <text x="3" y="8" style="font-size:4px; font-style: bold" text-anchor="mid">1</text>
                    <circle cx="4" cy="7" r="2" stroke="black" fill="transparent" stroke-width="0.5"/>
                    <line x1="7" y1="7" x2="20" y2="7" stroke="black" stroke-width="0.5"></line>
                    <text x="22" y="3" style="font-size:4px; font-style:bold;" text-anchor="mid">1 2 3</text>
                    <text x="22" y="8" style="font-size:4px; font-style:bold;" text-anchor="mid">2 3 1</text>
                    <text x="22" y="13" style="font-size:4px; font-style:bold;" text-anchor="mid">3 1 9</text>
                    <text x="32" y="8" style="font-size:4px; font-style:bold" text-anchor="mid">or</text>
                    <text x="38" y="3" style="font-size:4px; font-style:bold;" text-anchor="mid">1 2</text>
                    <text x="38" y="8" style="font-size:4px; font-style:bold;" text-anchor="mid">2 3</text>
                    <text x="38" y="13" style="font-size:4px; font-style:bold;" text-anchor="mid">3 1</text>

                    <text x="3" y="25" style="font-size:4px; font-style: bold" text-anchor="mid">2</text>
                    <circle cx="4" cy="24" r="2" stroke="black" fill="transparent" stroke-width="0.5"/>
                    <line x1="7" y1="24" x2="20" y2="24" stroke="black" stroke-width="0.5"></line>
                    <text x="22" y="24" style="font-size:4px; font-style:bold;" text-anchor="mid">(1, 2, 3),(2, 3, 1),(3, 1, 9)</text>
                </svg>
                <p>Email: jaihanani8_at_gmail[dot]com</p>
                </div>
            </div>
            <div class="col-8 wf">
                <h5 class="text-center display-6">Visualization</h5>
                <div id="sv">
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>

    <script>
        let svgcode = ['<svg xlmns="http://www.w3.org/2000/svg" id="viz" viewBox="0 0 100 100" width="80%" height="80%" overflow="visible"',
        'preserveAspectRatio="xMidYMid meet">','0',
        '<style type="text/css"><![CDATA[ circle.in { stroke: #333; stroke-width: 0.25; fill: #5af; } circle.out { stroke: gray; stroke-width: 0.20; fill: yellow;}',
                'line.edges {stroke: #333;stroke-width: 1;marker-end: url(#TriangleK);}',
                'text {text-anchor: middle; dominant-baseline: central;font-size: 3px; font-family: sans-serif;fill: #333;}',
            ']]></style>']
    let svg = ''
    let coeds = []
    let edges = []
    
    function draw_new(x, zero_there){
        let directed = document.getElementById('option1').checked
        for(let i = 0; i < svgcode.length; i++){
            if(i == 1 && directed == true){
                svg += '<defs><marker id="TriangleK" viewBox="0 0 30 10" refX="18" refY="5" markerWidth="9"  markerHeight="3" orient="visible !important" fill="#333"><path d="M 0 0 L 10 5 L 0 10 z"/></marker></defs>'
            }
            else{
            svg += svgcode[i]
            }
        }
        for(let k = 0; k < x; k++){
        a = 1 + Math.floor(Math.random() * 90)
        b = 1 + Math.floor(Math.random() * 90)
        coeds.push([a,b])
        }
        for(let i = 0; i < edges.length; i++){
            m = edges[i][0]
            n = edges[i][1]
            if(zero_there == false){
                m -= 1
                n -= 1
            }
            svg += '<line x1='+coeds[m][0]+'% y1='+coeds[m][1]+'% x2='+coeds[n][0]+'% y2='+coeds[n][1]+'% class="edges" stroke-linecap="round" />'
            if(edges[i].length>2){
            svg += '<circle class="out" cx='+(coeds[m][0] + coeds[n][0])/2+'% cy='+(coeds[m][1] + coeds[n][1])/2+'% r="2" />'
            svg += '<text x='+(coeds[m][0] + coeds[n][0])/2+'% y='+(coeds[m][1] + coeds[n][1])/2+'%>'+edges[i][2]+'</text>'}
        }
        for(let k = 0; k < coeds.length; k++){
            svg += '<g><circle class="in" cx = '+coeds[k][0]+'% cy='+coeds[k][1]+'% r = "2.5"/>'
            if(zero_there == true){
            svg += `<text x=${coeds[k][0]}% y=${coeds[k][1]}%>${k}</text></g>`
            } else {
            svg += `<text x=${coeds[k][0]}% y=${coeds[k][1]}%>${k+1}</text></g>`

            }
        }
        svg += '</svg>'
        document.getElementById('sv').innerHTML = svg;
    }
        
        
        document.getElementById("submit").addEventListener('click', func);


        function func() {
            svg = ''
            edges = []
            coeds = []
            let max = 0
            let content = document.getElementById('input').value;

            let input_type = document.getElementById('input_type').value
            
            let type_of_input = 0

            let zero_there = false

            if(input_type == "2"){
                type_of_input = 1
            }
            // for(let i = 0; i < input_type.length; i++){
            //     if(input_type[i].checked == true){
            //         type_of_input = i
            //     }
            // }

            if(type_of_input == 0){
                
                let given_edges = content.split("\n")
                for(let i = 0; i < given_edges.length; i++){
                    let x = given_edges[i].split(' ').map(function(item){
                        return parseInt(item, 10)
                    })

                    edges.push(x)
                    if(x[0] == 0 || x[1] == 0){
                        zero_there = true
                    }
                    max = Math.max(max, x[0])
                    max = Math.max(max, x[1])
                }
            } else if(type_of_input == 1){
                content = content.replace("[", "")
                content = content.replace("]","")
                let given_edges = content.split("),(")
                for(let i = 0; i < given_edges.length; i++){
                    let x = given_edges[i].replace("(","").split(",").map(function(item){
                        return parseInt(item, 10)
                    })
                    edges.push(x)
                    if(x[0] == 0 || x[1] == 0){
                        zero_there = true
                    }
                    max = Math.max(max, x[0])
                    max = Math.max(max, x[1])
                }
            }
            if(zero_there == true){
                draw_new(max + 1, zero_there)
            } else {
                draw_new(max, zero_there)
            }
        }

    </script>

</body>

</html>
